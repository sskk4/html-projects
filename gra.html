
<html>
<head>

    <style>



        #play_button:hover
        {
            background-color:lightseagreen;
        }
        #play_button
        {   border-radius:10%;
            width:200px;
            height: 72px;
            padding:10px;
            font-family:VCR OSD Mono;
            cursor:pointer;
            text-align: center;
            font-size: 72px;
            background-color:seagreen;
            border:2px solid black;
            margin-left:auto;
            margin-right: auto;
            margin-top:50px;

        }
        #all
        {
            top: 20%;
        left: 50%;
        transform: translate(-50%, -20%);
            position:fixed;
            z-index:250;
            margin-left:auto;
            margin-right: auto;
            width:500px;
            height: 500px;
            border:1px solid black;
        }

        #all_enemy
        {
            top: 20%;
        left: 50%;
        transform: translate(-50%, -20%);
            z-index:200;
            position:fixed;
            width:500px;
            height: 500px;
            
        }

        #character
        { z-index:250;
            position:relative;
            width:50px;
            height: 50px;
            border:1px solid seagreen;
            background-color:darkseagreen;
            border-radius: 50%;
          top:0px;
          left:0px;
        }

        #range
        { z-index:200;
            position:relative;
        }

        .enemy
        {
            z-index:200px;
            position:fixed;
            width:30px;
            height: 30px;
            background-color:darkslateblue;
            border-radius:50%;
        }

    </style>
    <title> gra </title>
</head>

<body>

    
<div id="all"> <div id="play_button" onclick="play()"> PLAY </div></div>
<div id="all_enemy"> </div>


    <script>

var start_position=225;
    var x=225;
    var y=225; 
    
    var move_action="";


function play()
{

    document.getElementById("all").innerHTML="";
    spawn_enemy();
   
 
    
    

    document.getElementById("all").innerHTML+="<div id='character'></div>"
    document.getElementById("all").innerHTML+="<div id='range'></div>"
    
    const character=document.getElementById("character");
    const range=document.getElementById("range");

  
   

    character.style.top="225px";
    character.style.left="225px";



//CHODZENIE
    
    document.addEventListener('keydown', function(event) {
    if(event.keyCode == 37) { //lewo 
        
move_action="left";

        if(character.style.left=="5px")
        {
        }
        else
        {
            x=x-10;
       character.style.left=x+"px";
        }
       
    }
    else if(event.keyCode == 39) { //prawo
       
        move_action="right";
        
        if(character.style.left=="445px")
        {
        }
        else
        {
            x=x+10;
       character.style.left=x+"px";
        }
    }
    else if(event.keyCode == 38) { //gora

        move_action="up";
        
        if(character.style.top=="5px")
        {
        }
        else
        {
            y=y-10;
       character.style.top=y+"px";
        }
    }
    else if(event.keyCode == 40) { //dol

        move_action="down";
        
        if(character.style.top=="445px")
        {
        }
        else
        {
            y=y+10;
       character.style.top=y+"px";
        }
    }

  
   
})
   

//ATAK

document.addEventListener('keydown', function(event){
 
    if(event.keyCode == 32)
    {
        
        character.style.backgroundColor="red";
        range.style.backgroundColor="red";


        if(move_action=="right")
        {
           
            innerHTML=""
        range.style.width=75+"px";
        range.style.height=100+"px";
        range.style.left=x+25;
        range.style.top=y-75;
        
        }

        else if(move_action=="left")
        {
        range.style.width=75+"px";
        range.style.height=100+"px";
        range.style.left=x-50;
        range.style.top=y-75;
       
        }

        else if(move_action=="up")
        {
            range.style.width=100+"px";
        range.style.height=75+"px";
        range.style.left=x-25;
        range.style.top=y-100;
       
        }

        else if(move_action=="down")
        {
    
            range.style.width=100+"px";
        range.style.height=75+"px";
        range.style.left=x-25;
        range.style.top=y-25;
       
        }

       
    }

})

document.addEventListener('keyup', function(event){
 
 if(event.keyCode == 32)
 {
    
    character.style.backgroundColor="red";
        range.style.left=0;
        range.style.top=0;
        range.style.width=0+"px";
        range.style.height=0+"px";
        range.style.backgroundColor="white";
     character.style.backgroundColor="darkseagreen";
 }

})



}



// przeciwnicy ruch i spawn
enemy_number=0;
var enemy_x = new Array();
var enemy_y = new Array();
var dx = new Array();
var dy = new Array();
var length = new Array();
var how_many_enemies=0;
var enemies_max=5;



//losowanie pozycji przeciwnikow

    for(var i=0;i<enemies_max;i++)
{
var random_y= Math.floor(Math.random() *(20 +400 ));
var random_x= Math.floor(Math.random() *( 2 + 40));
if(random_y>250)
{
random_y=0;
}
else
{
    random_y=450;
}
enemy_x[i]=random_x*10;
enemy_y[i]=random_y;
dx[i]=0;
dy[i]=0;
length[i]=0;
}



function spawn_enemy()
{

 
setTimeout(spawn_enemy,"1");
    
if(how_many_enemies==enemies_max)
{
    
}
else if(how_many_enemies==2)
{
    document.getElementById("all_enemy").innerHTML+="<div class='enemy' id='enemy"+enemy_number+"'></div>"
    setTimeout(move_enemy,"500");
    how_many_enemies++;
}
else
{
    document.getElementById("all_enemy").innerHTML+="<div class='enemy' id='enemy"+enemy_number+"'></div>"
    var colorHex = `#${Math.floor(Math.random()*16777215).toString(16)}`;
    document.getElementById("enemy"+enemy_number).setAttribute('style', 'background-color:' +colorHex+'; border:1px solid')
    how_many_enemies++;
}

var enemy=document.getElementById("enemy"+enemy_number);

if(enemy_number==enemies_max)
{
 enemy_number=0;
}
    else
    {
        move_enemy();
   
        var enemy=document.getElementById("enemy"+enemy_number);
    
        
    }



function move_enemy()
   {

 enemy_number++;


 if(enemy_number==enemies_max)
{
 enemy_number=0;
}

    if(enemy_x==470)
    {

    }
    else
    {
    dx[enemy_number]=x-enemy_x[enemy_number];
    dy[enemy_number]=y-enemy_y[enemy_number];

var dt= 1/60;
var speed=50;
        

//console.log("wrog nr: "+enemy_number+" length: "+length[enemy_number]+" dx: "+dx[enemy_number]+" dy: "+" enemy_x: "+enemy_x[enemy_number]+" enemy_y: "+enemy_y[enemy_number])

   length[enemy_number]=Math.sqrt(dx[enemy_number]*dx[enemy_number]+dy[enemy_number]*dy[enemy_number]);
    
    enemy_x[enemy_number]=enemy_x[enemy_number]+dt*dx[enemy_number]*speed/length[enemy_number];
    enemy_y[enemy_number]=enemy_y[enemy_number]+dt*dy[enemy_number]*speed/length[enemy_number];
    enemy.style.left=Math.round(enemy_x[enemy_number])+10;
    enemy.style.top=Math.round(enemy_y[enemy_number])+10;  
    }

   }

function colision()
{

    
}

}








    </script>
</body>

</html>